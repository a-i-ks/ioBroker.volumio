{
  "version": 3,
  "sources": ["../../src/lib/websocketVolumioClient.ts"],
  "sourcesContent": ["/**\n * WebSocket implementation of Volumio Client\n *\n * This client communicates with Volumio using Socket.IO WebSocket connections.\n * Real-time state updates are received via 'pushState' events.\n */\n\nimport io from \"socket.io-client\";\nimport type {\n  IVolumioClient,\n  VolumioState,\n  VolumioSystemInfo,\n  StateChangeCallback,\n  ConnectionStateCallback,\n} from \"./volumioClient\";\nimport type { Logger } from \"./logger\";\nimport { NoOpLogger } from \"./logger\";\n\nexport interface WebSocketClientConfig {\n  host: string;\n  port: number;\n  reconnectAttempts?: number; // Number of reconnection attempts (default: 5)\n  reconnectDelay?: number; // Delay between reconnection attempts in ms (default: 2000)\n  socketPath?: string; // Socket.IO path (default: \"/socket.io\")\n  transports?: (\"websocket\" | \"polling\")[]; // Transport methods (default: [\"websocket\", \"polling\"])\n  timeout?: number; // Connection timeout in ms (default: 10000)\n  forceNew?: boolean; // Force new connection (default: false)\n  validateConnection?: boolean; // Validate connection after connect (default: true)\n  logger?: Logger; // Logger instance (optional)\n}\n\nexport class WebSocketVolumioClient implements IVolumioClient {\n  private config: Required<WebSocketClientConfig>;\n  private socket?: SocketIOClient.Socket;\n  private connected: boolean = false;\n  private logger: Logger;\n  private stateChangeCallbacks: StateChangeCallback[] = [];\n  private connectionChangeCallbacks: ConnectionStateCallback[] = [];\n\n  constructor(config: WebSocketClientConfig) {\n    this.config = {\n      ...config,\n      reconnectAttempts: config.reconnectAttempts ?? 5,\n      reconnectDelay: config.reconnectDelay ?? 2000,\n      socketPath: config.socketPath ?? \"/socket.io\",\n      transports: config.transports ?? [\"websocket\", \"polling\"],\n      timeout: config.timeout ?? 10000,\n      forceNew: config.forceNew ?? false,\n      validateConnection: config.validateConnection !== false, // Default: true\n      logger: config.logger ?? new NoOpLogger(),\n    };\n\n    this.logger = this.config.logger;\n    this.logger.debug(\n      `WebSocket client initialized: ${this.config.host}:${this.config.port} (path: ${this.config.socketPath})`,\n    );\n  }\n\n  async connect(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const url = `http://${this.config.host}:${this.config.port}`;\n\n      this.logger.info(\n        `Connecting to Volumio via WebSocket: ${url} (path: ${this.config.socketPath}, transports: ${this.config.transports.join(\", \")})`,\n      );\n      this.logger.debug(\n        `Socket.IO config: reconnectAttempts=${this.config.reconnectAttempts}, reconnectDelay=${this.config.reconnectDelay}ms, timeout=${this.config.timeout}ms`,\n      );\n\n      this.socket = io(url, {\n        path: this.config.socketPath,\n        transports: this.config.transports,\n        reconnection: true,\n        reconnectionAttempts: this.config.reconnectAttempts,\n        reconnectionDelay: this.config.reconnectDelay,\n        timeout: this.config.timeout,\n        forceNew: this.config.forceNew,\n      });\n\n      let initialConnectionResolved = false;\n\n      // Connection successful\n      this.socket.on(\"connect\", async () => {\n        const transportName = (this.socket?.io as any)?.engine?.transport?.name;\n        this.logger.info(\n          `WebSocket connected successfully (transport: ${transportName})`,\n        );\n        this.connected = true;\n        this.notifyConnectionChange(true);\n\n        // Validate connection if enabled\n        if (this.config.validateConnection && !initialConnectionResolved) {\n          this.logger.debug(\"Validating connection with getState() call...\");\n          try {\n            await this.getState();\n            this.logger.debug(\"Connection validation successful\");\n            initialConnectionResolved = true;\n            resolve();\n          } catch (error) {\n            const errorMessage =\n              error instanceof Error ? error.message : String(error);\n            this.logger.error(`Connection validation failed: ${errorMessage}`);\n            initialConnectionResolved = true;\n            this.socket?.disconnect();\n            reject(\n              new Error(\n                `WebSocket connected but validation failed: ${errorMessage}`,\n              ),\n            );\n          }\n        } else if (!initialConnectionResolved) {\n          initialConnectionResolved = true;\n          resolve();\n        }\n      });\n\n      // Disconnection\n      this.socket.on(\"disconnect\", (reason: string) => {\n        this.logger.warn(`WebSocket disconnected: ${reason}`);\n        this.connected = false;\n        this.notifyConnectionChange(false);\n      });\n\n      // Connection error (initial connection and reconnection attempts)\n      this.socket.on(\"connect_error\", (error: Error) => {\n        const errorDetails = {\n          message: error.message,\n          type: error.name,\n          description: (error as any).description,\n          context: (error as any).context,\n        };\n\n        this.logger.error(\n          `WebSocket connection error: ${JSON.stringify(errorDetails)}`,\n        );\n        this.logger.debug(\n          `Connection attempt to ${url} failed. Transport: ${(this.socket?.io as any)?.engine?.transport?.name || \"unknown\"}`,\n        );\n\n        if (!initialConnectionResolved) {\n          initialConnectionResolved = true;\n          reject(\n            new Error(\n              `Failed to connect to Volumio at ${this.config.host}:${this.config.port} - ${error.message}`,\n            ),\n          );\n        } else {\n          // Log reconnection attempts\n          this.logger.warn(\n            `Reconnection attempt failed: ${error.message} (will retry)`,\n          );\n        }\n      });\n\n      // Reconnection attempt\n      this.socket.io.on(\"reconnect_attempt\", (attempt: number) => {\n        this.logger.debug(\n          `WebSocket reconnection attempt ${attempt}/${this.config.reconnectAttempts}`,\n        );\n      });\n\n      // Reconnection failed (all attempts exhausted)\n      this.socket.io.on(\"reconnect_failed\", () => {\n        this.logger.error(\n          `WebSocket reconnection failed after ${this.config.reconnectAttempts} attempts`,\n        );\n      });\n\n      // Reconnection successful\n      this.socket.io.on(\"reconnect\", (attempt: number) => {\n        this.logger.info(\n          `WebSocket reconnected successfully after ${attempt} attempt(s)`,\n        );\n      });\n\n      // Listen for state updates\n      this.socket.on(\"pushState\", (state: VolumioState) => {\n        this.logger.silly(`Received pushState event: ${JSON.stringify(state)}`);\n        this.notifyStateChange(state);\n      });\n\n      // Connection timeout\n      setTimeout(() => {\n        if (!initialConnectionResolved) {\n          this.logger.error(\n            `Connection timeout after ${this.config.timeout}ms`,\n          );\n          initialConnectionResolved = true;\n          this.socket?.disconnect();\n          reject(\n            new Error(\n              `Connection timeout: No response from Volumio at ${this.config.host}:${this.config.port} after ${this.config.timeout}ms`,\n            ),\n          );\n        }\n      }, this.config.timeout + 1000); // Add 1s buffer\n    });\n  }\n\n  async disconnect(): Promise<void> {\n    this.logger.info(\"Disconnecting WebSocket client...\");\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = undefined;\n      this.logger.debug(\"WebSocket disconnected\");\n    }\n    this.connected = false;\n    this.notifyConnectionChange(false);\n  }\n\n  isConnected(): boolean {\n    return this.connected && this.socket?.connected === true;\n  }\n\n  async ping(): Promise<boolean> {\n    return this.isConnected();\n  }\n\n  onStateChange(callback: StateChangeCallback): void {\n    this.stateChangeCallbacks.push(callback);\n  }\n\n  onConnectionChange(callback: ConnectionStateCallback): void {\n    this.connectionChangeCallbacks.push(callback);\n  }\n\n  async getState(): Promise<VolumioState> {\n    return this.sendCommand<VolumioState>(\"getState\");\n  }\n\n  async getSystemInfo(): Promise<VolumioSystemInfo> {\n    // Volumio doesn't reliably respond to getSystemInfo via WebSocket\n    // Fall back to REST API for this operation\n    this.logger.debug(\"Fetching system info via REST API fallback...\");\n    try {\n      const axios = await import(\"axios\");\n      const response = await axios.default.get<VolumioSystemInfo>(\n        `http://${this.config.host}:${this.config.port}/api/v1/getSystemInfo`,\n        { timeout: 5000 },\n      );\n      this.logger.silly(\n        `System info response: ${JSON.stringify(response.data)}`,\n      );\n      return response.data;\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : String(error);\n      this.logger.error(\n        `getSystemInfo() via REST fallback failed: ${errorMessage}`,\n      );\n      throw error;\n    }\n  }\n\n  // ==================== Playback Control ====================\n\n  async play(n?: number): Promise<void> {\n    if (n !== undefined) {\n      await this.sendCommand(\"play\", { value: n });\n    } else {\n      await this.sendCommand(\"play\");\n    }\n  }\n\n  async pause(): Promise<void> {\n    await this.sendCommand(\"pause\");\n  }\n\n  async stop(): Promise<void> {\n    await this.sendCommand(\"stop\");\n  }\n\n  async toggle(): Promise<void> {\n    await this.sendCommand(\"toggle\");\n  }\n\n  async next(): Promise<void> {\n    await this.sendCommand(\"next\");\n  }\n\n  async previous(): Promise<void> {\n    await this.sendCommand(\"prev\");\n  }\n\n  async seek(position: number): Promise<void> {\n    await this.sendCommand(\"seek\", { position });\n  }\n\n  // ==================== Volume Control ====================\n\n  async setVolume(volume: number): Promise<void> {\n    if (volume < 0 || volume > 100) {\n      throw new Error(\"Volume must be between 0 and 100\");\n    }\n    // Volumio WebSocket API: io.emit('volume', 90) - send number directly, not wrapped in object\n    await this.sendCommand(\"volume\", volume);\n  }\n\n  async volumePlus(): Promise<void> {\n    // Volumio WebSocket API: io.emit('volume', '+')\n    await this.sendCommand(\"volume\", \"+\");\n  }\n\n  async volumeMinus(): Promise<void> {\n    // Volumio WebSocket API: io.emit('volume', '-')\n    await this.sendCommand(\"volume\", \"-\");\n  }\n\n  async mute(): Promise<void> {\n    // Volumio WebSocket API: io.emit('mute', '')\n    await this.sendCommand(\"mute\", \"\");\n  }\n\n  async unmute(): Promise<void> {\n    // Volumio WebSocket API: io.emit('unmute', '')\n    await this.sendCommand(\"unmute\", \"\");\n  }\n\n  async toggleMute(): Promise<void> {\n    // Volumio doesn't have a native toggle, so we'll use mute command\n    // The client using this should implement toggle logic\n    await this.sendCommand(\"mute\", \"\");\n  }\n\n  // ==================== Queue Management ====================\n\n  async clearQueue(): Promise<void> {\n    await this.sendCommand(\"clearQueue\");\n  }\n\n  // ==================== Playback Options ====================\n\n  async setRandom(enabled: boolean): Promise<void> {\n    await this.sendCommand(\"random\", { value: enabled });\n  }\n\n  async setRepeat(enabled: boolean): Promise<void> {\n    await this.sendCommand(\"repeat\", { value: enabled });\n  }\n\n  async setRepeatSingle(enabled: boolean): Promise<void> {\n    await this.sendCommand(\"repeatSingle\", { value: enabled });\n  }\n\n  // ==================== Private Methods ====================\n\n  private async sendCommand<T = void>(\n    command: string,\n    data?: unknown,\n  ): Promise<T> {\n    return new Promise((resolve, reject) => {\n      if (!this.socket || !this.connected) {\n        const error = \"Not connected to Volumio\";\n        this.logger.error(`sendCommand(${command}) failed: ${error}`);\n        reject(new Error(error));\n        return;\n      }\n\n      // Format data for logging\n      let dataStr = \"\";\n      if (data !== undefined) {\n        if (typeof data === \"object\" && data !== null) {\n          dataStr = JSON.stringify(data);\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-base-to-string\n          dataStr = String(data);\n        }\n      }\n      this.logger.debug(\n        `Sending command: ${command}${dataStr ? ` with data: ${dataStr}` : \"\"}`,\n      );\n\n      // For commands that return data (like getState)\n      if (command === \"getState\") {\n        // Volumio responds to getState with a pushState event\n        this.socket.emit(command);\n\n        // Add timeout for response\n        const timeout = setTimeout(() => {\n          this.logger.warn(`Command ${command} response timeout after 5s`);\n          reject(new Error(`Timeout waiting for ${command} response`));\n        }, 5000);\n\n        this.socket.once(\"pushState\", (response: T) => {\n          clearTimeout(timeout);\n          this.logger.silly(\n            `Received ${command} response via pushState: ${JSON.stringify(response)}`,\n          );\n          resolve(response);\n        });\n      } else {\n        // For commands that don't return data\n        if (data !== undefined) {\n          this.socket.emit(command, data);\n        } else {\n          this.socket.emit(command);\n        }\n        this.logger.debug(`Command ${command} sent successfully`);\n        resolve(undefined as T);\n      }\n    });\n  }\n\n  private notifyStateChange(state: VolumioState): void {\n    this.logger.debug(\"Notifying state change callbacks\");\n    for (const callback of this.stateChangeCallbacks) {\n      try {\n        callback(state);\n      } catch (error) {\n        const errorMessage =\n          error instanceof Error ? error.message : String(error);\n        this.logger.error(`State change callback error: ${errorMessage}`);\n      }\n    }\n  }\n\n  private notifyConnectionChange(connected: boolean): void {\n    this.logger.debug(`Notifying connection change: ${connected}`);\n    for (const callback of this.connectionChangeCallbacks) {\n      try {\n        callback(connected);\n      } catch (error) {\n        const errorMessage =\n          error instanceof Error ? error.message : String(error);\n        this.logger.error(`Connection change callback error: ${errorMessage}`);\n      }\n    }\n  }\n}\n"],
  "mappings": "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",
  "names": ["io"]
}
