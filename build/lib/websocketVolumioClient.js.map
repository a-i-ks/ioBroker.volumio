{
  "version": 3,
  "sources": ["../../src/lib/websocketVolumioClient.ts"],
  "sourcesContent": ["/**\n * WebSocket implementation of Volumio Client\n *\n * This client communicates with Volumio using Socket.IO WebSocket connections.\n * Real-time state updates are received via 'pushState' events.\n */\n\nimport io from \"socket.io-client\";\nimport type {\n\tIVolumioClient,\n\tVolumioState,\n\tVolumioSystemInfo,\n\tStateChangeCallback,\n\tConnectionStateCallback,\n} from \"./volumioClient\";\nimport type { Logger } from \"./logger\";\nimport { NoOpLogger } from \"./logger\";\n\nexport interface WebSocketClientConfig {\n\thost: string;\n\tport: number;\n\treconnectAttempts?: number; // Number of reconnection attempts (default: 5)\n\treconnectDelay?: number; // Delay between reconnection attempts in ms (default: 2000)\n\tsocketPath?: string; // Socket.IO path (default: \"/socket.io\")\n\ttransports?: (\"websocket\" | \"polling\")[]; // Transport methods (default: [\"websocket\", \"polling\"])\n\ttimeout?: number; // Connection timeout in ms (default: 10000)\n\tforceNew?: boolean; // Force new connection (default: false)\n\tvalidateConnection?: boolean; // Validate connection after connect (default: true)\n\tlogger?: Logger; // Logger instance (optional)\n}\n\nexport class WebSocketVolumioClient implements IVolumioClient {\n\tprivate config: Required<WebSocketClientConfig>;\n\tprivate socket?: SocketIOClient.Socket;\n\tprivate connected: boolean = false;\n\tprivate logger: Logger;\n\tprivate stateChangeCallbacks: StateChangeCallback[] = [];\n\tprivate connectionChangeCallbacks: ConnectionStateCallback[] = [];\n\n\tconstructor(config: WebSocketClientConfig) {\n\t\tthis.config = {\n\t\t\t...config,\n\t\t\treconnectAttempts: config.reconnectAttempts ?? 5,\n\t\t\treconnectDelay: config.reconnectDelay ?? 2000,\n\t\t\tsocketPath: config.socketPath ?? \"/socket.io\",\n\t\t\ttransports: config.transports ?? [\"websocket\", \"polling\"],\n\t\t\ttimeout: config.timeout ?? 10000,\n\t\t\tforceNew: config.forceNew ?? false,\n\t\t\tvalidateConnection: config.validateConnection !== false, // Default: true\n\t\t\tlogger: config.logger ?? new NoOpLogger(),\n\t\t};\n\n\t\tthis.logger = this.config.logger;\n\t\tthis.logger.debug(\n\t\t\t`WebSocket client initialized: ${this.config.host}:${this.config.port} (path: ${this.config.socketPath})`,\n\t\t);\n\t}\n\n\tasync connect(): Promise<void> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst url = `http://${this.config.host}:${this.config.port}`;\n\n\t\t\tthis.logger.info(\n\t\t\t\t`Connecting to Volumio via WebSocket: ${url} (path: ${this.config.socketPath}, transports: ${this.config.transports.join(\", \")})`,\n\t\t\t);\n\t\t\tthis.logger.debug(\n\t\t\t\t`Socket.IO config: reconnectAttempts=${this.config.reconnectAttempts}, reconnectDelay=${this.config.reconnectDelay}ms, timeout=${this.config.timeout}ms`,\n\t\t\t);\n\n\t\t\tthis.socket = io(url, {\n\t\t\t\tpath: this.config.socketPath,\n\t\t\t\ttransports: this.config.transports,\n\t\t\t\treconnection: true,\n\t\t\t\treconnectionAttempts: this.config.reconnectAttempts,\n\t\t\t\treconnectionDelay: this.config.reconnectDelay,\n\t\t\t\ttimeout: this.config.timeout,\n\t\t\t\tforceNew: this.config.forceNew,\n\t\t\t});\n\n\t\t\tlet initialConnectionResolved = false;\n\n\t\t\t// Connection successful\n\t\t\tthis.socket.on(\"connect\", async () => {\n\t\t\t\tconst transportName = (this.socket?.io as any)?.engine?.transport?.name;\n\t\t\t\tthis.logger.info(`WebSocket connected successfully (transport: ${transportName})`);\n\t\t\t\tthis.connected = true;\n\t\t\t\tthis.notifyConnectionChange(true);\n\n\t\t\t\t// Validate connection if enabled\n\t\t\t\tif (this.config.validateConnection && !initialConnectionResolved) {\n\t\t\t\t\tthis.logger.debug(\"Validating connection with getState() call...\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this.getState();\n\t\t\t\t\t\tthis.logger.debug(\"Connection validation successful\");\n\t\t\t\t\t\tinitialConnectionResolved = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconst errorMessage = error instanceof Error ? error.message : String(error);\n\t\t\t\t\t\tthis.logger.error(`Connection validation failed: ${errorMessage}`);\n\t\t\t\t\t\tinitialConnectionResolved = true;\n\t\t\t\t\t\tthis.socket?.disconnect();\n\t\t\t\t\t\treject(new Error(`WebSocket connected but validation failed: ${errorMessage}`));\n\t\t\t\t\t}\n\t\t\t\t} else if (!initialConnectionResolved) {\n\t\t\t\t\tinitialConnectionResolved = true;\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Disconnection\n\t\t\tthis.socket.on(\"disconnect\", (reason: string) => {\n\t\t\t\tthis.logger.warn(`WebSocket disconnected: ${reason}`);\n\t\t\t\tthis.connected = false;\n\t\t\t\tthis.notifyConnectionChange(false);\n\t\t\t});\n\n\t\t\t// Connection error (initial connection and reconnection attempts)\n\t\t\tthis.socket.on(\"connect_error\", (error: Error) => {\n\t\t\t\tconst errorDetails = {\n\t\t\t\t\tmessage: error.message,\n\t\t\t\t\ttype: error.name,\n\t\t\t\t\tdescription: (error as any).description,\n\t\t\t\t\tcontext: (error as any).context,\n\t\t\t\t};\n\n\t\t\t\tthis.logger.error(`WebSocket connection error: ${JSON.stringify(errorDetails)}`);\n\t\t\t\tthis.logger.debug(\n\t\t\t\t\t`Connection attempt to ${url} failed. Transport: ${(this.socket?.io as any)?.engine?.transport?.name || \"unknown\"}`,\n\t\t\t\t);\n\n\t\t\t\tif (!initialConnectionResolved) {\n\t\t\t\t\tinitialConnectionResolved = true;\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t`Failed to connect to Volumio at ${this.config.host}:${this.config.port} - ${error.message}`,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Log reconnection attempts\n\t\t\t\t\tthis.logger.warn(`Reconnection attempt failed: ${error.message} (will retry)`);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Reconnection attempt\n\t\t\tthis.socket.io.on(\"reconnect_attempt\", (attempt: number) => {\n\t\t\t\tthis.logger.debug(`WebSocket reconnection attempt ${attempt}/${this.config.reconnectAttempts}`);\n\t\t\t});\n\n\t\t\t// Reconnection failed (all attempts exhausted)\n\t\t\tthis.socket.io.on(\"reconnect_failed\", () => {\n\t\t\t\tthis.logger.error(\n\t\t\t\t\t`WebSocket reconnection failed after ${this.config.reconnectAttempts} attempts`,\n\t\t\t\t);\n\t\t\t});\n\n\t\t\t// Reconnection successful\n\t\t\tthis.socket.io.on(\"reconnect\", (attempt: number) => {\n\t\t\t\tthis.logger.info(`WebSocket reconnected successfully after ${attempt} attempt(s)`);\n\t\t\t});\n\n\t\t\t// Listen for state updates\n\t\t\tthis.socket.on(\"pushState\", (state: VolumioState) => {\n\t\t\t\tthis.logger.silly(`Received pushState event: ${JSON.stringify(state)}`);\n\t\t\t\tthis.notifyStateChange(state);\n\t\t\t});\n\n\t\t\t// Connection timeout\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!initialConnectionResolved) {\n\t\t\t\t\tthis.logger.error(`Connection timeout after ${this.config.timeout}ms`);\n\t\t\t\t\tinitialConnectionResolved = true;\n\t\t\t\t\tthis.socket?.disconnect();\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t`Connection timeout: No response from Volumio at ${this.config.host}:${this.config.port} after ${this.config.timeout}ms`,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}, this.config.timeout + 1000); // Add 1s buffer\n\t\t});\n\t}\n\n\tasync disconnect(): Promise<void> {\n\t\tthis.logger.info(\"Disconnecting WebSocket client...\");\n\t\tif (this.socket) {\n\t\t\tthis.socket.disconnect();\n\t\t\tthis.socket = undefined;\n\t\t\tthis.logger.debug(\"WebSocket disconnected\");\n\t\t}\n\t\tthis.connected = false;\n\t\tthis.notifyConnectionChange(false);\n\t}\n\n\tisConnected(): boolean {\n\t\treturn this.connected && this.socket?.connected === true;\n\t}\n\n\tasync ping(): Promise<boolean> {\n\t\treturn this.isConnected();\n\t}\n\n\tonStateChange(callback: StateChangeCallback): void {\n\t\tthis.stateChangeCallbacks.push(callback);\n\t}\n\n\tonConnectionChange(callback: ConnectionStateCallback): void {\n\t\tthis.connectionChangeCallbacks.push(callback);\n\t}\n\n\tasync getState(): Promise<VolumioState> {\n\t\treturn this.sendCommand<VolumioState>(\"getState\");\n\t}\n\n\tasync getSystemInfo(): Promise<VolumioSystemInfo> {\n\t\treturn this.sendCommand<VolumioSystemInfo>(\"getSystemInfo\");\n\t}\n\n\t// ==================== Playback Control ====================\n\n\tasync play(n?: number): Promise<void> {\n\t\tif (n !== undefined) {\n\t\t\tawait this.sendCommand(\"play\", { value: n });\n\t\t} else {\n\t\t\tawait this.sendCommand(\"play\");\n\t\t}\n\t}\n\n\tasync pause(): Promise<void> {\n\t\tawait this.sendCommand(\"pause\");\n\t}\n\n\tasync stop(): Promise<void> {\n\t\tawait this.sendCommand(\"stop\");\n\t}\n\n\tasync toggle(): Promise<void> {\n\t\tawait this.sendCommand(\"toggle\");\n\t}\n\n\tasync next(): Promise<void> {\n\t\tawait this.sendCommand(\"next\");\n\t}\n\n\tasync previous(): Promise<void> {\n\t\tawait this.sendCommand(\"prev\");\n\t}\n\n\tasync seek(position: number): Promise<void> {\n\t\tawait this.sendCommand(\"seek\", { position });\n\t}\n\n\t// ==================== Volume Control ====================\n\n\tasync setVolume(volume: number): Promise<void> {\n\t\tif (volume < 0 || volume > 100) {\n\t\t\tthrow new Error(\"Volume must be between 0 and 100\");\n\t\t}\n\t\tawait this.sendCommand(\"volume\", { value: volume });\n\t}\n\n\tasync volumePlus(): Promise<void> {\n\t\tawait this.sendCommand(\"volume\", { value: \"plus\" });\n\t}\n\n\tasync volumeMinus(): Promise<void> {\n\t\tawait this.sendCommand(\"volume\", { value: \"minus\" });\n\t}\n\n\tasync mute(): Promise<void> {\n\t\tawait this.sendCommand(\"mute\");\n\t}\n\n\tasync unmute(): Promise<void> {\n\t\tawait this.sendCommand(\"unmute\");\n\t}\n\n\tasync toggleMute(): Promise<void> {\n\t\tawait this.sendCommand(\"mute\", { value: \"toggle\" });\n\t}\n\n\t// ==================== Queue Management ====================\n\n\tasync clearQueue(): Promise<void> {\n\t\tawait this.sendCommand(\"clearQueue\");\n\t}\n\n\t// ==================== Playback Options ====================\n\n\tasync setRandom(enabled: boolean): Promise<void> {\n\t\tawait this.sendCommand(\"random\", { value: enabled });\n\t}\n\n\tasync setRepeat(enabled: boolean): Promise<void> {\n\t\tawait this.sendCommand(\"repeat\", { value: enabled });\n\t}\n\n\tasync setRepeatSingle(enabled: boolean): Promise<void> {\n\t\tawait this.sendCommand(\"repeatSingle\", { value: enabled });\n\t}\n\n\t// ==================== Private Methods ====================\n\n\tprivate async sendCommand<T = void>(command: string, data?: Record<string, unknown>): Promise<T> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (!this.socket || !this.connected) {\n\t\t\t\tconst error = \"Not connected to Volumio\";\n\t\t\t\tthis.logger.error(`sendCommand(${command}) failed: ${error}`);\n\t\t\t\treject(new Error(error));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.logger.debug(`Sending command: ${command}${data ? ` with data: ${JSON.stringify(data)}` : \"\"}`);\n\n\t\t\t// For commands that return data (like getState)\n\t\t\tif (command === \"getState\") {\n\t\t\t\t// Volumio responds to getState with a pushState event\n\t\t\t\tthis.socket.emit(command);\n\n\t\t\t\t// Add timeout for response\n\t\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\t\tthis.logger.warn(`Command ${command} response timeout after 5s`);\n\t\t\t\t\treject(new Error(`Timeout waiting for ${command} response`));\n\t\t\t\t}, 5000);\n\n\t\t\t\tthis.socket.once(\"pushState\", (response: T) => {\n\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\tthis.logger.silly(`Received ${command} response via pushState: ${JSON.stringify(response)}`);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t} else if (command === \"getSystemInfo\") {\n\t\t\t\t// getSystemInfo returns data directly\n\t\t\t\tthis.socket.emit(command);\n\n\t\t\t\t// Add timeout for response\n\t\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\t\tthis.logger.warn(`Command ${command} response timeout after 5s`);\n\t\t\t\t\treject(new Error(`Timeout waiting for ${command} response`));\n\t\t\t\t}, 5000);\n\n\t\t\t\tthis.socket.once(command, (response: T) => {\n\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\tthis.logger.silly(`Received ${command} response: ${JSON.stringify(response)}`);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// For commands that don't return data\n\t\t\t\tif (data) {\n\t\t\t\t\tthis.socket.emit(command, data);\n\t\t\t\t} else {\n\t\t\t\t\tthis.socket.emit(command);\n\t\t\t\t}\n\t\t\t\tthis.logger.debug(`Command ${command} sent successfully`);\n\t\t\t\tresolve(undefined as T);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate notifyStateChange(state: VolumioState): void {\n\t\tthis.logger.debug(\"Notifying state change callbacks\");\n\t\tfor (const callback of this.stateChangeCallbacks) {\n\t\t\ttry {\n\t\t\t\tcallback(state);\n\t\t\t} catch (error) {\n\t\t\t\tconst errorMessage = error instanceof Error ? error.message : String(error);\n\t\t\t\tthis.logger.error(`State change callback error: ${errorMessage}`);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate notifyConnectionChange(connected: boolean): void {\n\t\tthis.logger.debug(`Notifying connection change: ${connected}`);\n\t\tfor (const callback of this.connectionChangeCallbacks) {\n\t\t\ttry {\n\t\t\t\tcallback(connected);\n\t\t\t} catch (error) {\n\t\t\t\tconst errorMessage = error instanceof Error ? error.message : String(error);\n\t\t\t\tthis.logger.error(`Connection change callback error: ${errorMessage}`);\n\t\t\t}\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": ["io"]
}
